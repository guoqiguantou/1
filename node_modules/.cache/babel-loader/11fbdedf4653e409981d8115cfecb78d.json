{"remainingRequest":"/Users/guoqiguantou/Documents/project/union-admin/node_modules/babel-loader/lib/index.js!/Users/guoqiguantou/Documents/project/union-admin/src/utils/httpUtil.js","dependencies":[{"path":"/Users/guoqiguantou/Documents/project/union-admin/src/utils/httpUtil.js","mtime":1640097278000},{"path":"/Users/guoqiguantou/Documents/project/union-admin/node_modules/cache-loader/dist/cjs.js","mtime":1625413103544},{"path":"/Users/guoqiguantou/Documents/project/union-admin/node_modules/babel-loader/lib/index.js","mtime":1600870463537}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKCnZhciBfdGhpcyA9IHRoaXM7CgppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBNZXNzYWdlLCBMb2FkaW5nIH0gZnJvbSAnZWxlbWVudC11aSc7CmltcG9ydCBTdG9yYWdlVXRpbCBmcm9tICdAL3V0aWxzJzsKdmFyIEJBU0VfVVJMID0gJ2h0dHBzOi8vZGV2LmZveWFuZ3ppZ2F0ZXdheS5qdXNoZXdhbmcuY29tL2ZveWFuZ3ppYmZmJzsKdmFyIGVudiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WOwp2YXIgbG9hZGluZ0luc3RhbmNlOwoKc3dpdGNoIChlbnYpIHsKICBjYXNlICdwcm9kdWN0aW9uJzoKICAgIEJBU0VfVVJMID0gJ2h0dHBzOi8vZm95YW5nemlnYXRld2F5Lmp1c2hld2FuZy5jb20vZm95YW5nemliZmYnOwogICAgYnJlYWs7CgogIGNhc2UgJ3Rlc3QnOgogICAgQkFTRV9VUkwgPSAnaHR0cHM6Ly90ZXN0LmZveWFuZ3ppZ2F0ZXdheS5qdXNoZXdhbmcuY29tL2ZveWFuZ3ppYmZmJzsKICAgIGJyZWFrOwoKICBkZWZhdWx0OgogICAgYnJlYWs7Cn0gLy/or7fmsYLmi6bmiKrlmagKCgpheGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGxvYWRpbmdJbnN0YW5jZSA9IExvYWRpbmcuc2VydmljZSh7CiAgICBmdWxsc2NyZWVuOiB0cnVlCiAgfSk7CiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOwp9KTsgLy/lk43lupTmi6bmiKrlmagKCmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlcykgewogIGxvYWRpbmdJbnN0YW5jZS5jbG9zZSgpOwoKICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICByZXR1cm4gcmVzOwogIH0KfSwgZnVuY3Rpb24gKGVycikgewogIE1lc3NhZ2UuZXJyb3IoJ+acjeWKoeW8guW4uCzor7fph43or5UnKTsKICBjb25zb2xlLmxvZyhlcnIsICdlcnJvcicpOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOwp9KTsKCnZhciBiYXNlUmVxdWVzdCA9IGZ1bmN0aW9uIGJhc2VSZXF1ZXN0KF9yZWYpIHsKICB2YXIgdXJsID0gX3JlZi51cmwsCiAgICAgIF9yZWYkYmFzZV91cmwgPSBfcmVmLmJhc2VfdXJsLAogICAgICBiYXNlX3VybCA9IF9yZWYkYmFzZV91cmwgPT09IHZvaWQgMCA/IEJBU0VfVVJMIDogX3JlZiRiYXNlX3VybCwKICAgICAgX3JlZiRkYXRhID0gX3JlZi5kYXRhLAogICAgICBkYXRhID0gX3JlZiRkYXRhID09PSB2b2lkIDAgPyB7fSA6IF9yZWYkZGF0YSwKICAgICAgX3JlZiRtZXRob2QgPSBfcmVmLm1ldGhvZCwKICAgICAgbWV0aG9kID0gX3JlZiRtZXRob2QgPT09IHZvaWQgMCA/ICdQT1NUJyA6IF9yZWYkbWV0aG9kLAogICAgICBfcmVmJHRpbWVvdXQgPSBfcmVmLnRpbWVvdXQsCiAgICAgIHRpbWVvdXQgPSBfcmVmJHRpbWVvdXQgPT09IHZvaWQgMCA/IDEwMDAwIDogX3JlZiR0aW1lb3V0LAogICAgICBfcmVmJGlzRm9ybURhdGEgPSBfcmVmLmlzRm9ybURhdGEsCiAgICAgIGlzRm9ybURhdGEgPSBfcmVmJGlzRm9ybURhdGEgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZiRpc0Zvcm1EYXRhLAogICAgICBfcmVmJGFzeW5jID0gX3JlZi5hc3luYywKICAgICAgYXN5bmMgPSBfcmVmJGFzeW5jID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYkYXN5bmM7CiAgYXhpb3MuZGVmYXVsdHMuaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7CiAgdmFyIHRva2VuID0gU3RvcmFnZVV0aWwuZ2V0VG9rZW4oKTsKCiAgaWYgKGlzRm9ybURhdGEpIHsKICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ211bHRpcGFydC9mb3JtLWRhdGEnOwogIH0KCiAgaWYgKHRva2VuKSB7CiAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzWyd4LWF1dGgtdG9rZW4nXSA9IHRva2VuOwogIH0KCiAgaWYgKHRpbWVvdXQpIHsKICAgIGF4aW9zLmRlZmF1bHRzLnRpbWVvdXQgPSB0aW1lb3V0OwogIH0KCiAgdmFyIG9wdGlvbnMgPSB7CiAgICBiYXNlVVJMOiBiYXNlX3VybCwKICAgIHVybDogdXJsLAogICAgbWV0aG9kOiBtZXRob2QKICB9OwoKICBpZiAobWV0aG9kID09PSAnR0VUJyB8fCBtZXRob2QgPT09ICdERUxFVEUnKSB7CiAgICBvcHRpb25zLnBhcmFtcyA9IGRhdGE7CiAgfSBlbHNlIHsKICAgIG9wdGlvbnMuZGF0YSA9IGRhdGE7CiAgfQoKICByZXR1cm4gYXhpb3Mob3B0aW9ucykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICB2YXIgaGVhZGVycyA9IHJlcy5oZWFkZXJzLAogICAgICAgIGRhdGEgPSByZXMuZGF0YSwKICAgICAgICBzdGF0dXMgPSByZXMuc3RhdHVzOwogICAgdmFyIGNvbnRlbnRUeXBlID0gaGVhZGVyc1snY29udGVudC10eXBlJ107CgogICAgaWYgKHN0YXR1cyAhPT0gMjAwKSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ+acjeWKoeWZqOivt+axguWksei0pScpKTsKICAgIH0KCiAgICBpZiAoY29udGVudFR5cGUgJiYgY29udGVudFR5cGUuaW5kZXhPZignYXBwbGljYXRpb24vanNvbicpICE9PSAtMSkgewogICAgICB2YXIgcmV0Q29kZSA9IGRhdGEucmV0Q29kZSwKICAgICAgICAgIHJldE1zZyA9IGRhdGEucmV0TXNnOwoKICAgICAgaWYgKHJldENvZGUgPT09IDIwMCB8fCByZXRDb2RlID09PSAyMDEpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGRhdGEpOwogICAgICB9IGVsc2UgaWYgKHJldENvZGUgPT09IDIwMikgewogICAgICAgIFN0b3JhZ2VVdGlsLmNsZWFyKCk7CgogICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiAnL2xvZ2luJwogICAgICAgIH0pOwoKICAgICAgICBNZXNzYWdlLmVycm9yKCfnmbvlvZXnirbmgIHlt7Lov4fmnJ8s6K+36YeN5paw55m75b2VJyk7CiAgICAgICAgbG9jYXRpb24ucmVsb2FkKHRydWUpOwogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoJ+eZu+W9leeKtuaAgeW3sui/h+acnyzor7fph43mlrDnmbvlvZUnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBNZXNzYWdlLmVycm9yKHJldE1zZyB8fCAiXHU2M0E1XHU1M0UzXHU1RjAyXHU1RTM4OiIuY29uY2F0KHJldENvZGUpKTsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJldE1zZyB8fCAiXHU2M0E1XHU1M0UzXHU1RjAyXHU1RTM4OiIuY29uY2F0KHJldENvZGUpKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEVycm9yKCd0aGUgcmVzcG9uc2UgaXMgbm90IEpTT04nKSk7CiAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgY29uc29sZS5sb2coZXJyKTsKICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZXJyKTsKICB9KTsKfTsKCmV4cG9ydCB7IGF4aW9zIH07CmV4cG9ydCBkZWZhdWx0IGJhc2VSZXF1ZXN0Ow=="},{"version":3,"sources":["/Users/guoqiguantou/Documents/project/union-admin/src/utils/httpUtil.js"],"names":["axios","Message","Loading","StorageUtil","BASE_URL","env","process","NODE_ENV","loadingInstance","interceptors","request","use","config","service","fullscreen","err","Promise","reject","response","res","close","status","error","console","log","baseRequest","url","base_url","data","method","timeout","isFormData","async","defaults","headers","token","getToken","options","baseURL","params","then","contentType","Error","indexOf","retCode","retMsg","resolve","clear","$router","push","path","location","reload","catch"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport { Message, Loading } from 'element-ui';\r\nimport StorageUtil from '@/utils';\r\n\r\nlet BASE_URL = 'https://dev.foyangzigateway.jushewang.com/foyangzibff';\r\n\r\nconst env = process.env.NODE_ENV;\r\nlet loadingInstance \r\n\r\nswitch (env) {\r\n  case 'production':\r\n    BASE_URL = 'https://foyangzigateway.jushewang.com/foyangzibff';\r\n    break;\r\n  case 'test':\r\n    BASE_URL = 'https://test.foyangzigateway.jushewang.com/foyangzibff';\r\n    break;\r\n  default:\r\n    break;\r\n}\r\n\r\n//请求拦截器\r\naxios.interceptors.request.use (\r\n  function (config) {\r\n    loadingInstance = Loading.service({ fullscreen: true });\r\n    return config;\r\n  },\r\n  function (err) {\r\n    return Promise.reject (err);\r\n  }\r\n);\r\n\r\n//响应拦截器\r\naxios.interceptors.response.use (\r\n  function (res) {\r\n    loadingInstance.close();\r\n    if (res.status === 200) {\r\n      return res;\r\n    }\r\n  },\r\n  function (err) {\r\n    Message.error('服务异常,请重试');\r\n    console.log (err, 'error');\r\n    return Promise.reject (err);\r\n  }\r\n);\r\n\r\nconst baseRequest = ({\r\n  url,\r\n  base_url = BASE_URL,\r\n  data = {},\r\n  method = 'POST',\r\n  timeout = 10000,\r\n  isFormData = false,\r\n  async = false,\r\n}) => {\r\n  axios.defaults.headers['Content-Type'] = 'application/json';\r\n  const token = StorageUtil.getToken ();\r\n  if (isFormData) {\r\n    axios.defaults.headers['Content-Type'] = 'multipart/form-data';\r\n  }\r\n  if (token) {\r\n    axios.defaults.headers['x-auth-token'] = token;\r\n  }\r\n\r\n  if (timeout) {\r\n    axios.defaults.timeout = timeout;\r\n  }\r\n\r\n  const options = {\r\n    baseURL: base_url,\r\n    url,\r\n    method,\r\n  };\r\n\r\n  if (method === 'GET' || method === 'DELETE') {\r\n    options.params = data;\r\n  } else {\r\n    options.data = data;\r\n  }\r\n\r\n  return axios (options)\r\n    .then (res => {\r\n      const {headers, data, status} = res;\r\n      const contentType = headers['content-type'];\r\n      if (status !== 200) {\r\n        return Promise.reject (new Error ('服务器请求失败'));\r\n      }\r\n      if (contentType && contentType.indexOf ('application/json') !== -1) {\r\n        const {retCode, retMsg} = data;\r\n        if (retCode === 200 || retCode === 201) {\r\n          return Promise.resolve (data);\r\n        } else if (retCode === 202) {\r\n          StorageUtil.clear ();\r\n          this.$router.push ({path: '/login'});\r\n          Message.error ('登录状态已过期,请重新登录');\r\n          location.reload (true);\r\n          return Promise.resolve ('登录状态已过期,请重新登录');\r\n        } else {\r\n          Message.error (retMsg || `接口异常:${retCode}`);\r\n          return Promise.resolve (retMsg || `接口异常:${retCode}`);\r\n        }\r\n      }\r\n      return Promise.resolve (new Error ('the response is not JSON'));\r\n    })\r\n    .catch (err => {\r\n      console.log (err);\r\n      return Promise.resolve (err);\r\n    });\r\n};\r\n\r\nexport {axios};\r\nexport default baseRequest;\r\n"]}]}